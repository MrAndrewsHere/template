; ===========================
; Основные параметры PHP
; ===========================
;expose_php = Off                  ; Отключает вывод информации о версии PHP в заголовках
;short_open_tag = Off             ; Отключает короткие теги PHP (<?)
;output_buffering = 0             ; Отключает буферизацию вывода
default_charset = "UTF-8"        ; Устанавливает кодировку по умолчанию
memory_limit = 512M              ; Максимальный объем памяти для скрипта
max_execution_time = 60          ; Максимальное время выполнения скрипта в секундах
max_input_time = 60             ; Максимальное время обработки входных данных
max_input_vars = 10000          ; Максимальное количество входных переменных

; Часовой пояс (важно для корректной работы дат)
date.timezone = "UTC"           ; Устанавливает временную зону по умолчанию

; ===========================
; Обработка ошибок и логирование
; ===========================
; В контейнере пишем логи в stderr, чтобы их забирал оркестратор
;error_reporting = E_ALL & ~E_DEPRECATED & ~E_USER_DEPRECATED  ; Уровень отчетности об ошибках
;display_errors = Off            ; Отключает отображение ошибок в браузере
;display_startup_errors = Off    ; Отключает отображение ошибок при запуске
log_errors = On                ; Включает логирование ошибок
;error_log = /proc/self/fd/2    ; Путь к файлу логов ошибок
log_errors_max_len = 16384     ; Максимальная длина сообщения об ошибке

; ===========================
; Загрузка файлов
; ===========================
file_uploads = On              ; Разрешает загрузку файлов
upload_max_filesize = 20M      ; Максимальный размер загружаемого файла
post_max_size = 25M            ; Максимальный размер POST-данных

; ===========================
; Сессии (настройки по умолчанию)
; ===========================
session.use_strict_mode = 1     ; Строгий режим для идентификаторов сессий
session.use_only_cookies = 1    ; Использовать только cookies для хранения ID сессии
session.cookie_httponly = 1     ; Делает сессионные cookie доступными только через HTTP
; Включите ниже на проде с HTTPS:
; session.cookie_secure = 1     ; Отправка cookie только через HTTPS
session.cookie_samesite = "Lax" ; Политика Same-Site для cookie

; ===========================
; Настройки реального пути (кэш)
; ===========================
realpath_cache_size = 4096K    ; Размер кэша для реальных путей к файлам
realpath_cache_ttl = 600       ; Время жизни кэша реальных путей в секундах

; ===========================
; OPCache (ускорение PHP)
; ===========================
; Требуется установленный модуль opcache
opcache.enable = 1             ; Включает OPCache
opcache.enable_cli = 1         ; Включает OPCache для CLI
; Для продакшена обычно отключают валидацию таймстемпов:
;opcache.validate_timestamps = 0 ; Отключает проверку изменений файлов
; Для разработки можно включить и поставить интервал проверки, например:
; opcache.validate_timestamps = 1  ; Включает проверку изменений файлов
; opcache.revalidate_freq = 2     ; Интервал проверки изменений в секундах

opcache.memory_consumption = 128         ; Размер памяти для OPCache в МБ
opcache.interned_strings_buffer = 16    ; Размер буфера для интернированных строк
opcache.max_accelerated_files = 10000   ; Максимальное количество файлов в кэше
opcache.save_comments = 1               ; Сохранять комментарии при кэшировании
;opcache.fast_shutdown = 1               ; Ускоренное завершение работы
; Предотвращение неожиданных рестартов кеша при пиках
opcache.max_wasted_percentage = 5       ; Максимальный процент "потерянной" памяти
